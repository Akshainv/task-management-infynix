<!-- employee-completed-projects.component.html -->
<app-employee-sidebar></app-employee-sidebar>

<div class="main-content">
  <div class="projects-container">

    <!-- Page Header -->
    <div class="page-header">
      <div class="header-content">
        <div class="header-title-section">
          <div class="title-wrapper">
            <i class="fas fa-check-circle header-icon"></i>
            <div>
              <h1 class="page-title">Completed Tasks</h1>
              <p class="page-subtitle">View all your completed projects and tasks</p>
            </div>
          </div>
        </div>

        <!-- Stats Card - Total Completed -->
        <div class="stats-card-single">
          <div class="stat-item">
            <div class="stat-icon-wrapper completed">
              <i class="fas fa-clipboard-check"></i>
            </div>
            <div class="stat-content">
              <span class="stat-label">Total Completed</span>
              <span class="stat-value">{{ projects.length }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="search-section">
        <div class="search-bar">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" placeholder="Search by project name, client, or location..."
            [(ngModel)]="searchQuery" (input)="onSearch()">
          <button *ngIf="searchQuery" class="clear-search-btn" (click)="clearSearch()" type="button">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loader"></div>
      <p>Loading completed projects...</p>
    </div>

    <!-- Projects Grid -->
    <div *ngIf="!isLoading && paginatedProjects.length > 0" class="projects-grid">
      <div *ngFor="let project of paginatedProjects" class="project-card"
        [ngClass]="'project-card-' + project.colorTheme">

        <!-- Card Header -->
        <div class="card-header">
          <h2 class="project-name">{{ project.name }}</h2>

        </div>

        <!-- Project Description -->
        <p class="project-description">{{ project.description }}</p>

        <!-- Project Details -->
        <div class="project-details">
          <div class="detail-item">
            <i class="fas fa-map-marker-alt detail-icon"></i>
            <span class="detail-text">{{ project.location }}</span>
          </div>
          <div class="detail-item">
            <i class="fas fa-phone detail-icon"></i>
            <span class="detail-text">{{ project.clientNumber }}</span>
          </div>
          <div class="detail-item">
            <i class="fas fa-calendar-check detail-icon"></i>
            <span class="detail-label">Completed:</span>
            <span class="detail-text">{{ formatDate(project.completionDate) }}</span>
          </div>
          <div class="detail-item">
            <i class="fas fa-calendar-alt detail-icon"></i>
            <span class="detail-label">Deadline:</span>
            <span class="detail-text">{{ formatDate(project.deadline) }}</span>
          </div>
        </div>

        <!-- Status Badge -->
        <div class="card-footer">
          <span class="status-badge status-completed">
            <i class="fas fa-check-circle"></i>
            {{ project.status }}
          </span>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div *ngIf="!isLoading && filteredProjects.length > 0" class="pagination-container">
      <button class="pagination-btn" (click)="previousPage()" [disabled]="currentPage === 1" type="button">
        <i class="fas fa-chevron-left"></i>
        Previous
      </button>

      <div class="page-numbers">
        <button *ngFor="let page of getPageNumbers()" class="page-number-btn" [class.active]="page === currentPage"
          (click)="goToPage(page)" type="button">
          {{ page }}
        </button>
      </div>

      <button class="pagination-btn" (click)="nextPage()" [disabled]="currentPage === totalPages" type="button">
        Next
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && filteredProjects.length === 0" class="empty-state">
      <div class="empty-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <h2 class="empty-title">
        {{ searchQuery ? 'No projects found' : 'No completed projects yet' }}
      </h2>
      <p class="empty-description">
        {{ searchQuery ? 'Try adjusting your search criteria' : 'Your completed projects will appear here once tasks are
        marked as complete' }}
      </p>
      <button *ngIf="searchQuery" class="clear-filter-btn" (click)="clearSearch()" type="button">
        <i class="fas fa-times"></i>
        Clear Search
      </button>
    </div>

  </div>
</div>